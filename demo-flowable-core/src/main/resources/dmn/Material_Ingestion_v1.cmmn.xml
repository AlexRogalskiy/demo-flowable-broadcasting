<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/CMMN/20151109/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:flowable="http://flowable.org/cmmn" xmlns:cmmndi="http://www.omg.org/spec/CMMN/20151109/CMMNDI" xmlns:dc="http://www.omg.org/spec/CMMN/20151109/DC" xmlns:di="http://www.omg.org/spec/CMMN/20151109/DI" targetNamespace="http://www.flowable.org/casedef">
  <case id="materialIngestion" name="Material Ingestion" flowable:initiatorVariableName="initiator">
    <casePlanModel id="material-ingestion" name="Material Ingestion" flowable:formKey="materialIngestionStartForm" flowable:formFieldValidation="true">
      <planItem id="planItem3" name="Quality Control Stage" definitionRef="qc-stage"></planItem>
      <planItem id="planItem5" name="QC Passed" definitionRef="qc-passed-stage">
        <entryCriterion id="qc-passed-entry-sentry" flowable:sentryRef="sentry5"></entryCriterion>
        <entryCriterion id="qc-passed-entry-sentry-from-editing" flowable:sentryRef="sentry2"></entryCriterion>
      </planItem>
      <planItem id="planItem7" name="QC Not Passed" definitionRef="qc-not-passed-stage">
        <entryCriterion id="qc-not-passed-entry-sentry" flowable:sentryRef="sentry4"></entryCriterion>
      </planItem>
      <planItem id="planItem9" name="Need Editing" definitionRef="need-editing-stage">
        <entryCriterion id="need-editing-entry-sentry" flowable:sentryRef="sentry3"></entryCriterion>
      </planItem>
      <sentry id="sentry5">
        <ifPart>
          <condition><![CDATA[${var:eq(qcPassed, 'Yes') && var:eq(needEditing, 'No')}]]></condition>
        </ifPart>
        <planItemOnPart id="sentryOnPart2" sourceRef="planItem3">
          <standardEvent>complete</standardEvent>
        </planItemOnPart>
      </sentry>
      <sentry id="sentry2">
        <planItemOnPart id="sentryOnPart3" sourceRef="planItem9">
          <standardEvent>complete</standardEvent>
        </planItemOnPart>
      </sentry>
      <sentry id="sentry4">
        <ifPart>
          <condition><![CDATA[${var:eq(qcPassed, 'No') && var:eq(needEditing, 'No')}]]></condition>
        </ifPart>
        <planItemOnPart id="sentryOnPart4" sourceRef="planItem3">
          <standardEvent>complete</standardEvent>
        </planItemOnPart>
      </sentry>
      <sentry id="sentry3">
        <ifPart>
          <condition><![CDATA[${var:eq(qcPassed, 'No') && var:eq(needEditing, 'Yes')}]]></condition>
        </ifPart>
        <planItemOnPart id="sentryOnPart5" sourceRef="planItem3">
          <standardEvent>complete</standardEvent>
        </planItemOnPart>
      </sentry>
      <sentry id="sentry6">
        <planItemOnPart id="sentryOnPart6" sourceRef="planItem5">
          <standardEvent>complete</standardEvent>
        </planItemOnPart>
        <planItemOnPart id="sentryOnPart7" sourceRef="planItem7">
          <standardEvent>complete</standardEvent>
        </planItemOnPart>
      </sentry>
      <stage id="qc-stage" name="Quality Control Stage">
        <planItem id="planItem1" name="Gather metadata and QC data" definitionRef="gather-metadata-and-qc-data"></planItem>
        <planItem id="planItem2" name="QC passed?" definitionRef="qc-passed">
          <entryCriterion id="qc-human-task-entry-sentry" flowable:sentryRef="sentry1"></entryCriterion>
        </planItem>
        <sentry id="sentry1">
          <planItemOnPart id="sentryOnPart1" sourceRef="planItem1">
            <standardEvent>complete</standardEvent>
          </planItemOnPart>
        </sentry>
        <processTask id="gather-metadata-and-qc-data" name="Gather metadata and QC data" flowable:fallbackToDefaultTenant="false">
          <extensionElements>
            <flowable:in sourceExpression="${operationId}" target="operationId"></flowable:in>
            <flowable:in sourceExpression="${caseInstance.id}" target="caseInstanceId"></flowable:in>
          </extensionElements>
          <processRefExpression><![CDATA[automaticMtdAndQCExecution]]></processRefExpression>
        </processTask>
        <humanTask id="qc-passed" name="QC passed?" flowable:formKey="qcPassedForm" flowable:formFieldValidation="true"></humanTask>
      </stage>
      <stage id="qc-passed-stage" name="QC Passed">
        <planItem id="planItem4" name="Material accepted workflow" definitionRef="material-accepted-workflow"></planItem>
        <processTask id="material-accepted-workflow" name="Material accepted workflow" flowable:fallbackToDefaultTenant="false">
          <extensionElements>
            <flowable:in sourceExpression="${operationId}" target="operationId"></flowable:in>
          </extensionElements>
        </processTask>
      </stage>
      <stage id="qc-not-passed-stage" name="QC Not Passed">
        <planItem id="planItem6" name="Material rejected workflow" definitionRef="material-rejected-workflow"></planItem>
        <processTask id="material-rejected-workflow" name="Material rejected workflow" flowable:fallbackToDefaultTenant="false">
          <extensionElements>
            <flowable:in sourceExpression="${operationId}" target="operationId"></flowable:in>
          </extensionElements>
        </processTask>
      </stage>
      <stage id="need-editing-stage" name="Need Editing">
        <planItem id="planItem8" name="Edit material" definitionRef="edit-material"></planItem>
        <humanTask id="edit-material" name="Edit material" flowable:formFieldValidation="true"></humanTask>
      </stage>
      <exitCriterion id="case-exit-sentry" flowable:sentryRef="sentry6"></exitCriterion>
    </casePlanModel>
  </case>
  <cmmndi:CMMNDI>
    <cmmndi:CMMNDiagram id="CMMNDiagram_materialIngestion">
      <cmmndi:CMMNShape id="CMMNShape_material-ingestion" cmmnElementRef="material-ingestion">
        <dc:Bounds height="540.0" width="580.0" x="120.0" y="30.0"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_case-exit-sentry" cmmnElementRef="case-exit-sentry">
        <dc:Bounds height="22.0" width="14.0" x="209.4184768214724" y="559.8135298352458"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItem3" cmmnElementRef="planItem3">
        <dc:Bounds height="126.0" width="277.0" x="260.82035873950457" y="48.5"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItem1" cmmnElementRef="planItem1">
        <dc:Bounds height="80.0" width="100.0" x="275.82035873950457" y="81.0"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItem2" cmmnElementRef="planItem2">
        <dc:Bounds height="80.0" width="100.0" x="431.5" y="81.0"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_qc-human-task-entry-sentry" cmmnElementRef="qc-human-task-entry-sentry">
        <dc:Bounds height="22.0" width="14.0" x="423.5" y="110.0"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItem5" cmmnElementRef="planItem5">
        <dc:Bounds height="128.0" width="161.0" x="318.82035873950457" y="423.5"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_qc-passed-entry-sentry" cmmnElementRef="qc-passed-entry-sentry">
        <dc:Bounds height="22.0" width="14.0" x="399.89816223009655" y="411.5893870929633"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_qc-passed-entry-sentry-from-editing" cmmnElementRef="qc-passed-entry-sentry-from-editing">
        <dc:Bounds height="22.0" width="14.0" x="451.82035873950457" y="412.5"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItem4" cmmnElementRef="planItem4">
        <dc:Bounds height="80.0" width="100.0" x="350.32035873950457" y="447.5"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItem7" cmmnElementRef="planItem7">
        <dc:Bounds height="132.0" width="160.0" x="180.0" y="238.5"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_qc-not-passed-entry-sentry" cmmnElementRef="qc-not-passed-entry-sentry">
        <dc:Bounds height="22.0" width="14.0" x="295.2613366340522" y="227.23839811697985"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItem6" cmmnElementRef="planItem6">
        <dc:Bounds height="80.0" width="100.0" x="210.0" y="264.5"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItem9" cmmnElementRef="planItem9">
        <dc:Bounds height="121.00000000000006" width="168.0" x="455.8203587395046" y="244.0"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_need-editing-entry-sentry" cmmnElementRef="need-editing-entry-sentry">
        <dc:Bounds height="22.0" width="14.0" x="573.8203587395046" y="232.0"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItem8" cmmnElementRef="planItem8">
        <dc:Bounds height="80.0" width="100.0" x="489.8203587395046" y="270.0"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNEdge id="CMMNEdge_sid-174DFDF8-D587-4C46-A720-4EF5065C4539" cmmnElementRef="qc-not-passed-entry-sentry" targetCMMNElementRef="planItem3">
        <di:waypoint x="306.16458920791996" y="233.40811288931553"></di:waypoint>
        <di:waypoint x="351.19092108742535" y="174.45"></di:waypoint>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNEdge>
      <cmmndi:CMMNEdge id="CMMNEdge_sid-60AE492B-64B5-427A-A462-C4B018A196B0" cmmnElementRef="case-exit-sentry" targetCMMNElementRef="planItem5">
        <di:waypoint x="221.5477818353233" y="567.9290592207215"></di:waypoint>
        <di:waypoint x="318.8203587395045" y="523.9049200888948"></di:waypoint>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNEdge>
      <cmmndi:CMMNEdge id="CMMNEdge_sid-C8995119-24C2-4364-8382-203335843CD6" cmmnElementRef="planItem3" targetCMMNElementRef="qc-passed-entry-sentry">
        <di:waypoint x="398.57171009085596" y="174.5"></di:waypoint>
        <di:waypoint x="406.89816223009655" y="411.5893870929633"></di:waypoint>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNEdge>
      <cmmndi:CMMNEdge id="CMMNEdge_sid-ABD8E76C-9E50-4D74-B7BB-B4865FDCD3EA" cmmnElementRef="planItem9" targetCMMNElementRef="qc-passed-entry-sentry-from-editing">
        <di:waypoint x="497.5933317124776" y="365.00000000000006"></di:waypoint>
        <di:waypoint x="462.5237230805306" y="418.3527031893769"></di:waypoint>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNEdge>
      <cmmndi:CMMNEdge id="CMMNEdge_sid-C67F6978-65E8-4FCC-8D17-755211AC3D25" cmmnElementRef="need-editing-entry-sentry" targetCMMNElementRef="planItem3">
        <di:waypoint x="576.7594190456585" y="238.38120506675796"></di:waypoint>
        <di:waypoint x="487.34356686522324" y="174.45"></di:waypoint>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNEdge>
      <cmmndi:CMMNEdge id="CMMNEdge_sid-B65582A4-EB2D-4652-888D-460CE6B83356" cmmnElementRef="planItem1" targetCMMNElementRef="qc-human-task-entry-sentry">
        <di:waypoint x="375.77035873950456" y="121.0"></di:waypoint>
        <di:waypoint x="423.5" y="121.0"></di:waypoint>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNEdge>
      <cmmndi:CMMNEdge id="CMMNEdge_sid-4AA69E0B-6FE0-41A1-84C2-DF4960621B04" cmmnElementRef="case-exit-sentry" targetCMMNElementRef="planItem7">
        <di:waypoint x="218.49126473205428" y="563.0825547246686"></di:waypoint>
        <di:waypoint x="249.40732298300804" y="370.45000000000005"></di:waypoint>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNEdge>
    </cmmndi:CMMNDiagram>
  </cmmndi:CMMNDI>
</definitions>